/********************************************************************************
 * Copyright (C) 2017 TypeFox and others.
 *
 * This program and the accompanying materials are made available under the
 * terms of the Eclipse Public License v. 2.0 which is available at
 * http://www.eclipse.org/legal/epl-2.0.
 *
 * This Source Code may also be made available under the following Secondary
 * Licenses when the conditions for such availability set forth in the Eclipse
 * Public License v. 2.0 are satisfied: GNU General Public License, version 2
 * with the GNU Classpath Exception which is available at
 * https://www.gnu.org/software/classpath/license.html.
 *
 * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0
 ********************************************************************************/
import URI from '@theia/core/lib/common/uri';
import { ResourceProvider, CommandService, MenuPath } from '@theia/core';
import { ContextMenuRenderer, LabelProvider, StatefulWidget, Message } from '@theia/core/lib/browser';
import { EditorManager, EditorWidget, EditorOpenerOptions } from '@theia/editor/lib/browser';
import { WorkspaceService } from '@theia/workspace/lib/browser';
import { Git, GitFileChange, Repository, WorkingDirectoryStatus, CommitWithChanges } from '../common';
import { GitWatcher } from '../common/git-watcher';
import { GitRepositoryProvider } from './git-repository-provider';
import { GitCommitMessageValidator } from './git-commit-message-validator';
import { GitAvatarService } from './history/git-avatar-service';
import { ReactWidget } from '@theia/core/lib/browser/widgets/react-widget';
import * as React from "react";
import { GitErrorHandler } from './git-error-handler';
export interface GitFileChangeNode extends GitFileChange {
    readonly icon: string;
    readonly label: string;
    readonly description: string;
    readonly caption?: string;
    readonly extraIconClassName?: string;
    readonly commitSha?: string;
    selected?: boolean;
}
export declare namespace GitFileChangeNode {
    function is(node: Object | undefined): node is GitFileChangeNode;
}
export declare class GitWidget extends ReactWidget implements StatefulWidget {
    protected readonly git: Git;
    protected readonly gitWatcher: GitWatcher;
    protected readonly contextMenuRenderer: ContextMenuRenderer;
    protected readonly resourceProvider: ResourceProvider;
    protected readonly commandService: CommandService;
    protected readonly repositoryProvider: GitRepositoryProvider;
    protected readonly labelProvider: LabelProvider;
    protected readonly workspaceService: WorkspaceService;
    protected readonly avatarService: GitAvatarService;
    protected readonly commitMessageValidator: GitCommitMessageValidator;
    private static MESSAGE_BOX_MIN_HEIGHT;
    protected stagedChanges: GitFileChangeNode[];
    protected unstagedChanges: GitFileChangeNode[];
    protected mergeChanges: GitFileChangeNode[];
    protected message: string;
    protected messageBoxHeight: number;
    protected status: WorkingDirectoryStatus | undefined;
    protected scrollContainer: string;
    protected commitMessageValidationResult: GitCommitMessageValidator.Result | undefined;
    protected lastCommit: {
        commit: CommitWithChanges;
        avatar: string;
    } | undefined;
    protected lastHead: string | undefined;
    protected readonly editorManager: EditorManager;
    protected readonly gitErrorHandler: GitErrorHandler;
    constructor(git: Git, gitWatcher: GitWatcher, contextMenuRenderer: ContextMenuRenderer, resourceProvider: ResourceProvider, commandService: CommandService, repositoryProvider: GitRepositoryProvider, labelProvider: LabelProvider, workspaceService: WorkspaceService, avatarService: GitAvatarService, commitMessageValidator: GitCommitMessageValidator);
    protected init(): void;
    initialize(repository: Repository | undefined): Promise<void>;
    onActivateRequest(msg: Message): void;
    storeState(): object;
    restoreState(oldState: any): void;
    protected undo(): Promise<void>;
    doCommit(repository?: Repository, options?: 'amend' | 'sign-off', message?: string): Promise<void>;
    protected updateView(status: WorkingDirectoryStatus | undefined): Promise<void>;
    protected renderCommitMessage(): React.ReactNode;
    protected onCommitMessageChange(e: Event): void;
    protected resize(textArea: HTMLTextAreaElement): void;
    protected validateCommitMessage(input: string | undefined): Promise<GitCommitMessageValidator.Result | undefined>;
    protected render(): React.ReactNode;
    protected getLastCommit(): Promise<{
        commit: CommitWithChanges;
        avatar: string;
    } | undefined>;
    protected renderLastCommit(): React.ReactNode;
    protected readonly refresh: () => Promise<void>;
    protected doRefresh(): Promise<void>;
    protected readonly showMoreToolButtons: (event: React.MouseEvent<HTMLElement>) => void;
    protected doShowMoreToolButtons(event: React.MouseEvent<HTMLElement>): void;
    protected readonly signOff: () => Promise<void>;
    protected doSignOff(): Promise<void>;
    protected readonly commit: (repository: Repository | undefined) => any;
    protected renderCommandBar(repository: Repository | undefined): React.ReactNode;
    protected getUserConfig(repository: Repository): Promise<[string, string]>;
    protected readonly unstage: (repository: Repository, change: GitFileChange) => void;
    protected doUnstage(repository: Repository, change: GitFileChange): Promise<void>;
    protected readonly discard: (repository: Repository, change: GitFileChange) => void;
    protected doDiscard(repository: Repository, change: GitFileChange): Promise<void>;
    protected readonly stage: (repository: Repository, change: GitFileChange) => void;
    protected doStage(repository: Repository, change: GitFileChange): Promise<void>;
    protected renderGitItemButtons(repository: Repository, change: GitFileChange): React.ReactNode;
    protected renderGitItem(repository: Repository | undefined, change: GitFileChangeNode): React.ReactNode;
    protected renderMergeChanges(repository: Repository | undefined): React.ReactNode | undefined;
    protected renderStagedChanges(repository: Repository | undefined): React.ReactNode | undefined;
    protected renderUnstagedChanges(repository: Repository | undefined): React.ReactNode | undefined;
    findChange(uri: URI): GitFileChange | undefined;
    openChange(change: GitFileChange, options?: EditorOpenerOptions): Promise<EditorWidget | undefined>;
    protected createChangeUri(change: GitFileChange): URI;
    protected resetCommitMessages(): void;
}
export declare namespace GitWidget {
    namespace ContextMenu {
        const PATH: MenuPath;
        const OTHER_GROUP: MenuPath;
        const COMMIT_GROUP: MenuPath;
    }
    namespace Styles {
        const MAIN_CONTAINER = "theia-git-main-container";
        const COMMIT_MESSAGE_CONTAINER = "theia-git-commit-message-container";
        const COMMIT_MESSAGE = "theia-git-commit-message";
        const VALIDATION_MESSAGE = "theia-git-commit-validation-message";
        const LAST_COMMIT_CONTAINER = "theia-git-last-commit-container";
        const LAST_COMMIT_DETAILS = "theia-git-last-commit-details";
        const LAST_COMMIT_MESSAGE_AVATAR = "theia-git-last-commit-message-avatar";
        const LAST_COMMIT_MESSAGE_SUMMARY = "theia-git-last-commit-message-summary";
        const LAST_COMMIT_MESSAGE_TIME = "theia-git-last-commit-message-time";
        const FLEX_CENTER = "flex-container-center";
        const NO_SELECT = "no-select";
    }
}
//# sourceMappingURL=git-widget.d.ts.map